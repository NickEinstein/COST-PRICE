"use strict";(self.webpackChunktodoors_web=self.webpackChunktodoors_web||[]).push([[551],{11551:function(e,i,l){l.r(i),l.d(i,{default:function(){return S}});var n=l(4942),a=l(93433),t=l(74165),s=l(15861),d=l(1413),o=l(29439),r=l(72791),c=l(8152),u=(l(72426),l(10656),l(4565)),v=l(17205),m=l(49371),f=l(81872),h=l(79365),x=l(35702),p=l(16871),g=(l(14781),l(71066),l(79873),l(28613)),j=l(13832),b=l(88871),N=l(97876),w=l(5588),Z=l(85215),y=l(53448),P=l(98906),C=l(80184),_=function(e){return new Promise((function(i,l){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return i(n.result)},n.onerror=function(e){return l(e)}}))},k=function(e){var i=e.images,l=void 0===i?[]:i,n=(0,p.UO)().id,d=(0,r.useState)(!1),c=(0,o.Z)(d,2),u=c[0],v=c[1],m=(0,r.useState)(""),f=(0,o.Z)(m,2),h=f[0],x=f[1],j=(0,r.useState)(""),b=(0,o.Z)(j,2),w=b[0],Z=b[1],k=(0,r.useState)([]),S=(0,o.Z)(k,2),W=S[0],E=S[1];(0,r.useEffect)((function(){E(null===l||void 0===l?void 0:l.map((function(e,i){return{uid:null===e||void 0===e?void 0:e.id,name:i+1,status:"done",url:null===e||void 0===e?void 0:e.image}})))}),[l]);var D=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(i){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.url||i.preview){e.next=4;break}return e.next=3,_(i.originFileObj);case 3:i.preview=e.sent;case 4:x(i.url||i.preview),v(!0),Z(i.name||i.url.substring(i.url.lastIndexOf("/")+1));case 7:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}(),O=(0,C.jsxs)("div",{children:[(0,C.jsx)(y.Z,{}),(0,C.jsx)("div",{style:{marginTop:8},children:"Upload"})]}),U=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(i){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.IV)({endpoint:"product/image/update/".concat(null===i||void 0===i?void 0:i.uid)});case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}(),A=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(i){var l,s,d,o,r,c,u,v,m;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=null===(l=i[i.length-1])||void 0===l?void 0:l.originFileObj,console.log(i),(d=new FormData).append("product_id",n),d.append("image",s),o={uid:"-xxx",percent:50,name:"image.png",status:"uploading",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},E([].concat((0,a.Z)(W),[o])),e.next=9,(0,N.v_)({endpoint:"product/image/add",body:d,auth:!0});case 9:"201"==(null===(r=e.sent)||void 0===r?void 0:r.status)&&(console.log(null===(c=r.data.data)||void 0===c?void 0:c.image),{uid:null===(u=r.data.data)||void 0===u||null===(v=u.image)||void 0===v?void 0:v.id,name:"image.png",status:"done",url:null===(m=r.data.data)||void 0===m?void 0:m.image}),console.log(r);case 12:case"end":return e.stop()}}),e)})));return function(i){return e.apply(this,arguments)}}();return(0,C.jsxs)(C.Fragment,{children:[(0,C.jsx)(g.Z,{listType:"picture-card",fileList:W,onPreview:D,onChange:function(e){var i=e.fileList;A(i)},onRemove:function(e){return U(e)},children:W.length>=8?null:O}),(0,C.jsx)(P.Z,{open:u,title:w,footer:null,onCancel:function(){return v(!1)},children:(0,C.jsx)("img",{alt:"example",style:{width:"100%"},src:h})})]})};var S=function(){var e,i,l,y,P,_,S=(0,p.UO)().id,W=r.useState(!1),E=(0,o.Z)(W,2),D=(E[0],E[1],r.useState("Select Filter")),O=(0,o.Z)(D,2),U=(O[0],O[1],(0,r.useState)(null)),A=(0,o.Z)(U,2),F=A[0],I=A[1],R=(0,r.useState)([]),T=(0,o.Z)(R,2),M=T[0],G=T[1],L=(0,p.s0)(),V=(0,w.Ds)().enqueueSnackbar,J=function(){L(b.g.PRODUCT_MANAGEMENT)},z=null===c.Z||void 0===c.Z?void 0:c.Z.useGetProductsByIdQuery({productId:S}),B=null===z||void 0===z||null===(e=z.data)||void 0===e||null===(i=e.data)||void 0===i?void 0:i.product;(0,r.useEffect)((function(){var e,i;console.log(B),I((0,d.Z)((0,d.Z)({},B),{},{category_id:null===B||void 0===B||null===(e=B.category)||void 0===e?void 0:e.id,weight:null===B||void 0===B?void 0:B.specification,volume:null===B||void 0===B?void 0:B.specification})),G(null===B||void 0===B||null===(i=B.product_prices)||void 0===i?void 0:i.map((function(e){return{location:null===e||void 0===e?void 0:e.region,companyPrice:(null===e||void 0===e?void 0:e.companyPrice)||"",minPrice:null===e||void 0===e?void 0:e.min,maxPrice:null===e||void 0===e?void 0:e.max}})))}),[B]);var Q=null===c.Z||void 0===c.Z?void 0:c.Z.useGetCategoriesQuery(),q=(null===Q||void 0===Q||null===(l=Q.data)||void 0===l||null===(y=l.data)||void 0===y?void 0:y.categories)||[];console.log(Q);var H=null===c.Z||void 0===c.Z?void 0:c.Z.useGetSubCategoriesQuery({categoryId:null===F||void 0===F?void 0:F.category_id}),K=(null===H||void 0===H||null===(P=H.data)||void 0===P||null===(_=P.data)||void 0===_?void 0:_.sub_category)||[],X=[{id:"available",name:"Available"},{id:"Unavailable",name:"unavailable"},{id:"Discontinued",name:"Discontinued"}],Y=[{id:"south-west",name:"South-West"},{id:"south-east",name:"South-East"},{id:"south-south",name:"South-South"},{id:"north-west",name:"North-West"},{id:"north-east",name:"North-East"},{id:"north-central",name:"North-central"}],$={color:"yellow",lights:"yes"},ee=["overall","rain coat"],ie={weight:"5kg",volume:"2cl"},le=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(){var i,l,n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(null===M||void 0===M?void 0:M.length),null!==F&&void 0!==F&&F.category_id){e.next=3;break}return e.abrupt("return",V("Please add category",{variant:"error"}));case 3:if(ie){e.next=5;break}return e.abrupt("return",V("Please add specification",{variant:"error"}));case 5:if(null!==F&&void 0!==F&&F.sub_category_id){e.next=7;break}return e.abrupt("return",V("Please add subcategory",{variant:"error"}));case 7:if(null!==F&&void 0!==F&&F.name){e.next=9;break}return e.abrupt("return",V("Please add product name",{variant:"error"}));case 9:if(null!==F&&void 0!==F&&F.description){e.next=11;break}return e.abrupt("return",V("Please add product description",{variant:"error"}));case 11:if(null!==F&&void 0!==F&&F.availability){e.next=13;break}return e.abrupt("return",V("Please add product availability",{variant:"error"}));case 13:if(null!==F&&void 0!==F&&F.volume){e.next=15;break}return e.abrupt("return",V("Please add product volume",{variant:"error"}));case 15:if(null!==F&&void 0!==F&&F.weight){e.next=17;break}return e.abrupt("return",V("Please add product weight",{variant:"error"}));case 17:if(!((null===M||void 0===M?void 0:M.length)<6)){e.next=19;break}return e.abrupt("return",V("Please add Prices for all 6 geopolitical zones",{variant:"error"}));case 19:if($){e.next=21;break}return e.abrupt("return",V("Please add product variants",{variant:"success"}));case 21:if(ee){e.next=23;break}return e.abrupt("return",V("Product added product tags",{variant:"success"}));case 23:return(i=new FormData).append("category_id",null===F||void 0===F?void 0:F.category_id),i.append("sub_category_id",null===F||void 0===F?void 0:F.sub_category_id),i.append("name",null===F||void 0===F?void 0:F.name),i.append("description",null===F||void 0===F?void 0:F.description),i.append("availability",null===F||void 0===F?void 0:F.availability),i.append("variants",JSON.stringify($)),i.append("tags",JSON.stringify(ee)),i.append("specification",JSON.stringify({weight:null===F||void 0===F?void 0:F.weight,volume:null===F||void 0===F?void 0:F.volume})),M.forEach((function(e,l){i.append("prices[".concat(l,"][region]"),e.location),i.append("prices[".concat(l,"][min]"),e.minPrice),i.append("prices[".concat(l,"][max]"),e.maxPrice)})),e.next=35,(0,N.v_)({endpoint:"product/update/".concat(S),body:i});case 35:l=e.sent,console.log(l),200==(null===l||void 0===l?void 0:l.status)?(V("Product added Successfully",{variant:"success"}),J(null===b.g||void 0===b.g||b.g.PRODUCT_MANAGEMENT)):V(null===l||void 0===l||null===(n=l.data)||void 0===n?void 0:n.message,{variant:"danger"});case 38:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=(g.Z.Dragger,function(e){console.log(e.target.name),console.log(e.target.value),I((0,d.Z)((0,d.Z)({},F),{},(0,n.Z)({},e.target.name,e.target.value)))});return(0,C.jsxs)("div",{className:"relative w-full pb-10",children:[(0,C.jsxs)("div",{className:"mb-8 mt-8 flex justify-between",children:[(0,C.jsx)(u.Z,{variant:"h5",className:"font-bold",children:"New Product"}),(0,C.jsxs)("div",{className:"flex gap-2",children:[(0,C.jsx)(v.Z,{onClick:function(){return J()},className:"bg-[#E0E5F2] text-[#2B3674]",children:"Cancel"}),(0,C.jsx)(v.Z,{onClick:function(){return le()},children:"Save Product"})]})]}),(0,C.jsxs)("div",{className:"flex gap-5  w-full",children:[(0,C.jsxs)("div",{className:"w-3/5",children:[(0,C.jsxs)("div",{className:"p-8 bg-white mt-5",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"General Information"}),(0,C.jsxs)("div",{className:"mt-8",children:[(0,C.jsx)("div",{className:"w-full justify-between ",children:(0,C.jsxs)("div",{className:"w-full ",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Product Name"}),(0,C.jsx)(m.Z,{value:null===F||void 0===F?void 0:F.name,name:"name",onChange:ne,className:"w-full",fullWidth:!0})]})}),(0,C.jsx)("div",{className:"w-full justify-between mt-3",children:(0,C.jsxs)("div",{className:"w-full ",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Description"}),(0,C.jsx)(m.Z,{name:"description",onChange:ne,multiline:!0,value:null===F||void 0===F?void 0:F.description,rows:5,className:"w-full",fullWidth:!0})]})}),(0,C.jsx)(f.Z,{})]})]}),(0,C.jsxs)("div",{className:"mt-5 p-8 bg-white",children:[(0,C.jsxs)("div",{className:"w-full justify-between p-5",children:[(0,C.jsx)("div",{className:"w-2/5",children:(0,C.jsx)(u.Z,{className:"font-bold",children:"Media"})}),(0,C.jsx)("div",{className:" flex gap-5 mt-5"}),(0,C.jsx)(k,{productDetails:F,images:null===F||void 0===F?void 0:F.product_images})]}),(0,C.jsx)(f.Z,{})]}),(0,C.jsxs)("div",{className:"p-8 bg-white mt-5",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Pricing Information"}),(0,C.jsxs)("div",{className:"mt-8",children:[(0,C.jsx)("div",{className:"w-full justify-between ",children:(0,C.jsxs)("div",{className:"w-full mt-4",children:[(0,C.jsx)(h.Z,{className:"text-left mb-2",children:"Location"}),(0,C.jsx)(m.Z,{onChange:function(e){ne(e)},fullWidth:!0,id:"outlined-select-currency",select:!0,value:null===F||void 0===F?void 0:F.location,name:"location",children:null===Y||void 0===Y?void 0:Y.map((function(e){return(0,C.jsx)(x.Z,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},e.id)}))})]})}),(0,C.jsx)("div",{className:"w-full justify-between mt-4",children:(0,C.jsxs)("div",{className:"w-full ",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Company Price"}),(0,C.jsx)(m.Z,{value:null===F||void 0===F?void 0:F.companyPrice,name:"companyPrice",onChange:ne,className:"w-full",fullWidth:!0})]})}),(0,C.jsxs)("div",{className:"w-full flex gap-4 justify-between mt-4",children:[(0,C.jsxs)("div",{className:"w-full ",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Recommended Price (min)"}),(0,C.jsx)(m.Z,{name:"minPrice",onChange:ne,className:"w-full",fullWidth:!0})]}),(0,C.jsxs)("div",{className:"w-full ",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Recommended Price (max)"}),(0,C.jsx)(m.Z,{name:"maxPrice",onChange:ne,className:"w-full",fullWidth:!0})]})]}),(0,C.jsx)(v.Z,{className:"mt-3",onClick:function(){null!==M&&void 0!==M&&M.find((function(e){return(null===e||void 0===e?void 0:e.location)==(null===F||void 0===F?void 0:F.location)}))?j.ZP.error("This location has already been added"):G([].concat((0,a.Z)(M),[{location:null===F||void 0===F?void 0:F.location,companyPrice:null===F||void 0===F?void 0:F.companyPrice,minPrice:null===F||void 0===F?void 0:F.minPrice,maxPrice:null===F||void 0===F?void 0:F.maxPrice}]))},children:"Add +"}),(null===M||void 0===M?void 0:M.length)>0&&(0,C.jsxs)("div",{className:"w-full mt-2",children:[(0,C.jsxs)("div",{className:"heading border-2 border-primary-main grid grid-cols-4 w-full gap-2 p-1",children:[(0,C.jsx)(u.Z,{className:"font-bold text-primary-main text-center",children:"Location"}),(0,C.jsx)(u.Z,{className:"font-bold text-primary-main text-center",children:"Price"}),(0,C.jsx)(u.Z,{className:"font-bold text-primary-main text-center",children:"Price (Min)"}),(0,C.jsx)(u.Z,{className:"font-bold text-primary-main text-center",children:"Price (Max)"})]}),null===M||void 0===M?void 0:M.map((function(e){return(0,C.jsxs)("div",{className:"heading border border-primary-main grid grid-cols-4 p-2",children:[(0,C.jsx)(u.Z,{className:"text-center",children:null===e||void 0===e?void 0:e.location}),(0,C.jsx)(u.Z,{className:"text-center",children:null===e||void 0===e?void 0:e.companyPrice}),(0,C.jsx)(u.Z,{className:"text-center",children:null===e||void 0===e?void 0:e.minPrice}),(0,C.jsxs)(u.Z,{className:"text-center flex justify-between",children:[(0,C.jsx)(u.Z,{className:"ml-3",children:null===e||void 0===e?void 0:e.maxPrice}),(0,C.jsx)(Z.Z,{onClick:function(){return function(e){console.log(M),console.log(e),G((0,a.Z)(null===M||void 0===M?void 0:M.filter((function(i){return(null===i||void 0===i?void 0:i.location)!==e}))))}(null===e||void 0===e?void 0:e.location)},className:"hover:text-red-500 cursor-pointer"})]})]})}))]})]})]})," ",(0,C.jsxs)("div",{className:"w-full flex gap-4 justify-between bg-white p-4 mt-4",children:[(0,C.jsxs)("div",{className:"w-full ",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Volume"}),(0,C.jsx)(m.Z,{name:"volume",placeholder:"L x W x H",value:null===F||void 0===F?void 0:F.volume,onChange:ne,className:"w-full",fullWidth:!0})]}),(0,C.jsxs)("div",{className:"w-full ",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Weight"}),(0,C.jsx)(m.Z,{name:"weight",placeholder:"0g",value:null===F||void 0===F?void 0:F.weight,onChange:ne,className:"w-full",fullWidth:!0})]})]})]}),(0,C.jsxs)("div",{className:"w-2/5",children:[(0,C.jsx)("div",{className:"p-8 bg-white mt-5",children:(0,C.jsxs)("div",{className:"mt-8",children:[(0,C.jsx)("div",{className:"w-full justify-between ",children:(0,C.jsxs)("div",{className:"w-full",children:[(0,C.jsx)(h.Z,{className:"text-left mb-2",children:" Category"}),(0,C.jsx)(m.Z,{onChange:function(e){ne(e)},fullWidth:!0,id:"outlined-select-currency",select:!0,name:"category_id",value:(null===F||void 0===F?void 0:F.category_id)&&(null===F||void 0===F?void 0:F.category_id)||"",children:null===q||void 0===q?void 0:q.map((function(e){return(0,C.jsx)(x.Z,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},e.id)}))})]})}),(0,C.jsxs)("div",{className:"w-full mt-4",children:[(0,C.jsx)(h.Z,{className:"text-left mb-2",children:"Sub Category"}),(0,C.jsx)(m.Z,{onChange:function(e){ne(e)},fullWidth:!0,id:"outlined-select-currency",select:!0,name:"sub_category_id",value:(null===F||void 0===F?void 0:F.sub_category_id)&&(null===F||void 0===F?void 0:F.sub_category_id)||"",children:null===K||void 0===K?void 0:K.map((function(e){return(0,C.jsx)(x.Z,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},e.id)}))})]}),(0,C.jsx)("div",{className:"w-full justify-between mt-4",children:(0,C.jsxs)("div",{className:"w-full ",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Tags (Optional)"}),(0,C.jsx)(m.Z,{name:"tags",onChange:ne,value:null===F||void 0===F?void 0:F.tags,className:"w-full",fullWidth:!0})]})})]})}),(0,C.jsxs)("div",{className:"mt-5 p-8 bg-white",children:[(0,C.jsx)("div",{className:"w-full justify-between p-5",children:(0,C.jsx)("div",{className:"w-full justify-between  mt-4",children:(0,C.jsxs)("div",{className:"w-full mt-4",children:[(0,C.jsxs)(h.Z,{className:"text-left mb-2",children:["Availability ",null===F||void 0===F?void 0:F.availability]}),(0,C.jsx)(m.Z,{onChange:function(e){ne(e)},fullWidth:!0,id:"outlined-select-currency",select:!0,name:"availability",value:(null===F||void 0===F?void 0:F.availability)&&(null===F||void 0===F?void 0:F.availability)||"",children:null===X||void 0===X?void 0:X.map((function(e){return(0,C.jsx)(x.Z,{value:null===e||void 0===e?void 0:e.id,children:null===e||void 0===e?void 0:e.name},e.id)}))})]})})}),(0,C.jsx)(f.Z,{})]}),(0,C.jsxs)("div",{className:"p-8 bg-white mt-5",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Variations"}),(0,C.jsxs)("div",{className:"mt-8",children:[(0,C.jsx)("div",{className:"w-full justify-between ",children:(0,C.jsxs)("div",{className:"w-full ",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"Variant"}),(0,C.jsx)(m.Z,{name:"variants",value:null===F||void 0===F?void 0:F.variants,onChange:ne,placeholder:"colors,sizes etc",className:"w-full",fullWidth:!0})]})}),(0,C.jsx)("div",{className:"w-full justify-between mt-4",children:(0,C.jsxs)("div",{className:"w-full ",children:[(0,C.jsx)(u.Z,{className:"font-bold",children:"attribute"}),(0,C.jsx)(m.Z,{value:null===F||void 0===F?void 0:F.attribute,name:"attribute",placeholder:"Blue, 3xl etc",onChange:ne,className:"w-full",fullWidth:!0})]})})]})]})]})]})]})}}}]);
//# sourceMappingURL=551.88bb328a.chunk.js.map